{"ast":null,"code":"import React,{PureComponent}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";class StoryMedia extends PureComponent{constructor(props){super(props);this.state={explicitVideoHeight:null};}renderAudio(){const{file}=this.props;return/*#__PURE__*/_jsx(\"audio\",{id:`audio-player${file.blob.id}`,controls:true,children:/*#__PURE__*/_jsx(\"source\",{src:file.url,type:file.blob.content_type},this.props.key)});}renderImage(){const{file}=this.props;const{explicitVideoHeight}=this.state;return/*#__PURE__*/_jsx(\"img\",{id:`img${file.blob.id}`,className:\"img-player\",width:\"80%\",ref:\"img\",src:file.url},this.props.key);}renderVideo(){const{file}=this.props;const{explicitVideoHeight}=this.state;return/*#__PURE__*/_jsx(\"video\",{id:`video-player${file.blob.id}`,className:\"video-player\",height:explicitVideoHeight,playsInline:true,controls:true,disablePictureInPicture:true,controlsList:\"nodownload\",ref:\"video\",children:/*#__PURE__*/_jsx(\"source\",{src:file.url,type:file.blob.content_type})},this.props.key);}render(){if(this.props.file.blob.content_type.indexOf(\"video\")!==-1){return this.renderVideo();}else if(this.props.file.blob.content_type.indexOf(\"audio\")!==-1){return this.renderAudio();}else{return this.renderImage();}}componentDidMount(){const video=this.refs.video;if(!!video===true){video.addEventListener('loadeddata',event=>{const aspectRatio=video.videoWidth/video.videoHeight;const newExplicitVideoHeight=video.offsetWidth/aspectRatio;this.setState({explicitVideoHeight:newExplicitVideoHeight});});video.addEventListener('play',event=>{window.pauseAllVideos(event.target);},true);}}}export default StoryMedia;","map":{"version":3,"names":["React","PureComponent","jsx","_jsx","StoryMedia","constructor","props","state","explicitVideoHeight","renderAudio","file","id","blob","controls","children","src","url","type","content_type","key","renderImage","className","width","ref","renderVideo","height","playsInline","disablePictureInPicture","controlsList","render","indexOf","componentDidMount","video","refs","addEventListener","event","aspectRatio","videoWidth","videoHeight","newExplicitVideoHeight","offsetWidth","setState","window","pauseAllVideos","target"],"sources":["C:/Users/alessandromusetta/node-app/cultura-estelar/src/StoryMedia.js"],"sourcesContent":["import React, { PureComponent } from \"react\";\nimport PropTypes from 'prop-types';\n\nclass StoryMedia extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      explicitVideoHeight: null\n    }\n  }\n\n  static propTypes = {\n    file: PropTypes.object\n  };\n\n  renderAudio() {\n    const { file } = this.props;\n    return (\n      <audio id={`audio-player${file.blob.id}`} controls>\n        <source src={file.url} type={file.blob.content_type} key={this.props.key} />\n      </audio>\n    );\n  }\n\n  renderImage() {\n    const { file } = this.props;\n    const { explicitVideoHeight } = this.state;\n    return (\n      <img\n        id = {`img${file.blob.id}`}\n        className=\"img-player\"\n        width=\"80%\"\n        key={this.props.key}\n        ref=\"img\"\n        src={file.url}\n        >\n        </img>\n    )\n  }\n\n  renderVideo() {\n    const { file } = this.props;\n    const { explicitVideoHeight } = this.state;\n    return (\n      <video\n        id={`video-player${file.blob.id}`}\n        className=\"video-player\"\n        height={explicitVideoHeight}\n        playsInline\n        controls\n        disablePictureInPicture={true}\n        controlsList='nodownload'\n        key={this.props.key}\n        ref=\"video\"\n      >\n        <source src={file.url} type={file.blob.content_type} />\n      </video>\n    );\n  }\n\n  render() {\n    if (this.props.file.blob.content_type.indexOf(\"video\") !== -1)\n    {\n      return this.renderVideo();\n    }\n    else if (this.props.file.blob.content_type.indexOf(\"audio\") !== -1)\n    {\n      return this.renderAudio();\n    }\n    else{\n      return this.renderImage();\n    }\n  }\n\n  componentDidMount() {\n    const video = this.refs.video;\n\n    if (!!video === true) {\n      video.addEventListener('loadeddata', (event) => {\n        const aspectRatio = video.videoWidth / video.videoHeight;\n        const newExplicitVideoHeight = video.offsetWidth / aspectRatio;\n        this.setState({ explicitVideoHeight: newExplicitVideoHeight });\n      });\n      video.addEventListener('play', (event) => {\n        window.pauseAllVideos(event.target);\n      }, true);\n    }\n  }\n}\n\nexport default StoryMedia;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAG7C,KAAM,CAAAC,UAAU,QAAS,CAAAH,aAAc,CACrCI,WAAWA,CAACC,KAAK,CAAE,CACjB,KAAK,CAACA,KAAK,CAAC,CACZ,IAAI,CAACC,KAAK,CAAG,CACXC,mBAAmB,CAAE,IACvB,CAAC,CACH,CAMAC,WAAWA,CAAA,CAAG,CACZ,KAAM,CAAEC,IAAK,CAAC,CAAG,IAAI,CAACJ,KAAK,CAC3B,mBACEH,IAAA,UAAOQ,EAAE,CAAG,eAAcD,IAAI,CAACE,IAAI,CAACD,EAAG,EAAE,CAACE,QAAQ,MAAAC,QAAA,cAChDX,IAAA,WAAQY,GAAG,CAAEL,IAAI,CAACM,GAAI,CAACC,IAAI,CAAEP,IAAI,CAACE,IAAI,CAACM,YAAa,EAAM,IAAI,CAACZ,KAAK,CAACa,GAAM,CAAC,CACvE,CAAC,CAEZ,CAEAC,WAAWA,CAAA,CAAG,CACZ,KAAM,CAAEV,IAAK,CAAC,CAAG,IAAI,CAACJ,KAAK,CAC3B,KAAM,CAAEE,mBAAoB,CAAC,CAAG,IAAI,CAACD,KAAK,CAC1C,mBACEJ,IAAA,QACEQ,EAAE,CAAK,MAAKD,IAAI,CAACE,IAAI,CAACD,EAAG,EAAE,CAC3BU,SAAS,CAAC,YAAY,CACtBC,KAAK,CAAC,KAAK,CAEXC,GAAG,CAAC,KAAK,CACTR,GAAG,CAAEL,IAAI,CAACM,GAAI,EAFT,IAAI,CAACV,KAAK,CAACa,GAIX,CAAC,CAEZ,CAEAK,WAAWA,CAAA,CAAG,CACZ,KAAM,CAAEd,IAAK,CAAC,CAAG,IAAI,CAACJ,KAAK,CAC3B,KAAM,CAAEE,mBAAoB,CAAC,CAAG,IAAI,CAACD,KAAK,CAC1C,mBACEJ,IAAA,UACEQ,EAAE,CAAG,eAAcD,IAAI,CAACE,IAAI,CAACD,EAAG,EAAE,CAClCU,SAAS,CAAC,cAAc,CACxBI,MAAM,CAAEjB,mBAAoB,CAC5BkB,WAAW,MACXb,QAAQ,MACRc,uBAAuB,CAAE,IAAK,CAC9BC,YAAY,CAAC,YAAY,CAEzBL,GAAG,CAAC,OAAO,CAAAT,QAAA,cAEXX,IAAA,WAAQY,GAAG,CAAEL,IAAI,CAACM,GAAI,CAACC,IAAI,CAAEP,IAAI,CAACE,IAAI,CAACM,YAAa,CAAE,CAAC,EAHlD,IAAI,CAACZ,KAAK,CAACa,GAIX,CAAC,CAEZ,CAEAU,MAAMA,CAAA,CAAG,CACP,GAAI,IAAI,CAACvB,KAAK,CAACI,IAAI,CAACE,IAAI,CAACM,YAAY,CAACY,OAAO,CAAC,OAAO,CAAC,GAAK,CAAC,CAAC,CAC7D,CACE,MAAO,KAAI,CAACN,WAAW,CAAC,CAAC,CAC3B,CAAC,IACI,IAAI,IAAI,CAAClB,KAAK,CAACI,IAAI,CAACE,IAAI,CAACM,YAAY,CAACY,OAAO,CAAC,OAAO,CAAC,GAAK,CAAC,CAAC,CAClE,CACE,MAAO,KAAI,CAACrB,WAAW,CAAC,CAAC,CAC3B,CAAC,IACG,CACF,MAAO,KAAI,CAACW,WAAW,CAAC,CAAC,CAC3B,CACF,CAEAW,iBAAiBA,CAAA,CAAG,CAClB,KAAM,CAAAC,KAAK,CAAG,IAAI,CAACC,IAAI,CAACD,KAAK,CAE7B,GAAI,CAAC,CAACA,KAAK,GAAK,IAAI,CAAE,CACpBA,KAAK,CAACE,gBAAgB,CAAC,YAAY,CAAGC,KAAK,EAAK,CAC9C,KAAM,CAAAC,WAAW,CAAGJ,KAAK,CAACK,UAAU,CAAGL,KAAK,CAACM,WAAW,CACxD,KAAM,CAAAC,sBAAsB,CAAGP,KAAK,CAACQ,WAAW,CAAGJ,WAAW,CAC9D,IAAI,CAACK,QAAQ,CAAC,CAAEjC,mBAAmB,CAAE+B,sBAAuB,CAAC,CAAC,CAChE,CAAC,CAAC,CACFP,KAAK,CAACE,gBAAgB,CAAC,MAAM,CAAGC,KAAK,EAAK,CACxCO,MAAM,CAACC,cAAc,CAACR,KAAK,CAACS,MAAM,CAAC,CACrC,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CACF,CAEA,cAAe,CAAAxC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}